(function(){"use strict";var e={715:function(e,t,r){var n=r(963),o=r(669),a=r.n(o),i=r(382),c=r.n(i),u=r(503),s=(r(397),r(433),r(252));function d(e,t,r,n,o,a){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i)])}var l=r(709),h=r(262),f={name:"App",setup(){const e=(0,l.oR)(),t=(0,h.Fl)((()=>e.state.isDarkMode));return(0,s.YP)(t,(e=>{!0===e?document.body.classList.add("dark"):document.body.classList.remove("dark")})),{isDarkMode:t}}};f.render=d;var p=f,m=r(119);const v=[{path:"/",name:"index",component:()=>r.e(212).then(r.bind(r,212)),children:[{path:"/",name:"login",alias:"login",component:()=>r.e(443).then(r.bind(r,443)),meta:{requiresAuth:!1},beforeEnter:(e,t)=>{const r=u.Z.auth().currentUser;if(r)return{path:"/dashboard"}}},{path:"/register",name:"register",component:()=>r.e(668).then(r.bind(r,668)),meta:{requiresAuth:!1},beforeEnter:(e,t)=>{const r=u.Z.auth().currentUser;if(r)return{path:"/dashboard"}}}]},{path:"/dashboard",name:"dashboard",component:()=>r.e(560).then(r.bind(r,560)),children:[{path:"",name:"products",component:()=>r.e(678).then(r.bind(r,678)),alias:"products"},{path:"orders",name:"orders",component:()=>r.e(883).then(r.bind(r,883)),alias:"orders"},{path:"coupons",name:"coupons",component:()=>r.e(985).then(r.bind(r,63)),alias:"coupons"}],meta:{requiresAuth:!0},beforeEnter:(e,t)=>{const r=u.Z.auth().currentUser;if(!r)return{path:"/"}}}],g=(0,m.p7)({history:(0,m.r5)(),routes:v});var b=g,E={state:{user:null,userName:""},actions:{registerUser({commit:e},t){u.Z.auth().createUserWithEmailAndPassword(t.email,t.password).then((t=>{var r=t.user;console.log(r.email),alert("註冊成功"),e("setUser",r)})).catch((e=>alert(e.message)))},loginUser({commit:e},t){u.Z.auth().signInWithEmailAndPassword(t.email,t.password).then((t=>{var r=t.user;console.log(r.email),alert("登入成功"),e("setUser",r)})).catch((e=>alert(e.message)))},logout({commit:e}){u.Z.auth().signOut(),alert("登出成功"),e("setUser",null)}},mutations:{setUser(e,t){t?(e.user=t,e.userName=t.email):(e.user=null,e.userName="")}},getters:{user(e){return e.user},userName(e){return e.userName.split("@")[0]}}},C={state:{productData:[],productLoaded:null,productEdit:!1,currentProductArray:[]},actions:{async getProduct({commit:e,state:t}){var r=u.Z.firestore().collection("products");const n=await r.get();n.forEach((r=>{if(!t.productData.some((e=>e.docId===r.id))){const t={docId:r.id,eventId:r.data().eventId,eventTitle:r.data().eventTitle,eventType:r.data().eventType,eventCategory:r.data().eventCategory,eventLocation:r.data().eventLocation,eventFullPrice:r.data().eventFullPrice,eventStudentPrice:r.data().eventStudentPrice,eventDiscountPrice:r.data().eventDiscountPrice,eventStartDate:r.data().eventStartDate,eventEndDate:r.data().eventEndDate,eventDescription:r.data().eventDescription,eventPhotos:r.data().eventPhotos,eventActive:r.data().eventActive,eventDraft:r.data().eventDraft};e("SET_PRODUCT_DATA",t)}})),e("PRODUCT_LOADED",!0)},editProduct({commit:e},t){e("EDIT_PRODUCT",t)},async getCurrentProduct(e,t){const r=u.Z.firestore().collection("products").where("eventId","==",t);await r.get().then((t=>{t.forEach((t=>{const r={docId:t.id,data:t.data()};e.commit("SET_CURRENT_PRODUCT",r)}))})),e.dispatch("showingModal",!0)},async updateProduct(e,{docId:t,eventId:r}){e.commit("DELETE_CURRENT_PRODUCT",t),await e.dispatch("getProduct"),e.dispatch("editProduct",!1),e.dispatch("getCurrentProduct",r)},async deleteProduct({commit:e},t){const r=u.Z.firestore().collection("products").doc(t);await r.delete(),e("DELETE_CURRENT_PRODUCT",t)}},mutations:{SET_PRODUCT_DATA(e,t){e.productData.push(t)},PRODUCT_LOADED(e,t){e.productLoaded=t},EDIT_PRODUCT(e,t){e.productEdit=t},SET_CURRENT_PRODUCT(e,t){e.currentProductArray=t},DELETE_CURRENT_PRODUCT(e,t){e.productData=e.productData.filter((e=>e.docId!==t))}},getters:{productData(e){return e.productData},productLoaded(e){return e.productLoaded},editProduct(e){return e.productEdit},currentProductArray(e){return e.currentProductArray}}},D={state:{showModal:!1,showExitCheckModal:!1},actions:{showingModal({commit:e},t){e("SHOWMODAL",t)},closingModal({commit:e},t){e("CLOSEMODAL",t)},showExitCheck({commit:e},t){e("SHOWEXITCHECK",t)},closeExitCheck({commit:e},t){e("CLOSEEXITCHECK",t)}},mutations:{SHOWMODAL(e,t){e.showModal=t},CLOSEMODAL(e,t){e.showModal=t},SHOWEXITCHECK(e,t){e.showExitCheckModal=t},CLOSEEXITCHECK(e,t){e.showExitCheckModal=t}},getters:{showModal(e){return e.showModal},showExitCheckModal(e){return e.showExitCheckModal}}},y=(0,l.MT)({state:{isDarkMode:!1},actions:{lightMode({commit:e},t){const r=t.isDarkMode;e("setMode",r)},darkMode({commit:e},t){const r=t.isDarkMode;e("setMode",r)}},mutations:{setMode(e,t){e.isDarkMode=t,console.log(t)}},modules:{authUser:E,modalManage:D,productsManage:C}});(0,n.ri)(p).use(y).use(b).use(c(),a()).mount("#app");const w={apiKey:"AIzaSyCyAGLOhmnY6PJOoynOkdhFmdPWXTWOHrw",authDomain:"ticketweb-backstage.firebaseapp.com",projectId:"ticketweb-backstage",storageBucket:"ticketweb-backstage.appspot.com",messagingSenderId:"1006538887131",appId:"1:1006538887131:web:0b5be84e0e5495e7ca61fe"};u.Z.initializeApp(w),u.Z.auth().onAuthStateChanged((function(e){e?b.replace("/dashboard"):b.replace("/")}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,n,o,a){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],a=e[d][2];for(var c=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(c=!1,a<i&&(i=a));if(c){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{212:"ce8937d8",443:"bc0613cc",560:"276f7ad2",668:"6f712d05",678:"7a011722",883:"f8e66e9b",985:"5c0b819e"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+".92628ad0.css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ticketweb-backstage:";r.l=function(n,o,a,i){if(e[n])e[n].push(o);else{var c,u;if(void 0!==a)for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var l=s[d];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+a){c=l;break}}c||(u=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.setAttribute("data-webpack",t+a),c.src=n),e[n]=[o];var h=function(t,r){c.onerror=c.onload=null,clearTimeout(f);var o=e[n];if(delete e[n],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(r)})),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=h.bind(null,c.onerror),c.onload=h.bind(null,c.onload),u&&document.head.appendChild(c)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/ticketweb-backstage/"}(),function(){var e=function(e,t,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var a=function(a){if(o.onerror=o.onload=null,"load"===a.type)r();else{var i=a&&("load"===a.type?"missing":a.type),c=a&&a.target&&a.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=i,u.request=c,o.parentNode.removeChild(o),n(u)}};return o.onerror=o.onload=a,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=r[n],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],a=o.getAttribute("data-href");if(a===e||a===t)return o}},n=function(n){return new Promise((function(o,a){var i=r.miniCssF(n),c=r.p+i;if(t(i,c))return o();e(n,c,o,a)}))},o={143:0};r.f.miniCss=function(e,t){var r={678:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};r.f.j=function(t,n){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise((function(r,n){o=e[t]=[r,n]}));n.push(o[2]=a);var i=r.p+r.u(t),c=new Error,u=function(n){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,o[1](c)}};r.l(i,u,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,a,i=n[0],c=n[1],u=n[2],s=0;if(i.some((function(t){return 0!==e[t]}))){for(o in c)r.o(c,o)&&(r.m[o]=c[o]);if(u)var d=u(r)}for(t&&t(n);s<i.length;s++)a=i[s],r.o(e,a)&&e[a]&&e[a][0](),e[i[s]]=0;return r.O(d)},n=self["webpackChunkticketweb_backstage"]=self["webpackChunkticketweb_backstage"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(715)}));n=r.O(n)})();
//# sourceMappingURL=app.9ba5ab5c.js.map